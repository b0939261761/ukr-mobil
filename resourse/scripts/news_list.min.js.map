{"version":3,"sources":["news_list.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"news_list.min.js","sourcesContent":["const newsListBtnLoadMore = document.getElementById('newsListBtnLoadMore');\n\nif (newsListBtnLoadMore) {\n  const newsListList = document.getElementById('newsListList');\n  const newsListPaginationWrapper = document.getElementById('newsListPaginationWrapper');\n  const newsListBtnLoadMoreCount = document.getElementById('newsListBtnLoadMoreCount');\n\n  const params = new URLSearchParams(window.location.search);\n  let page = +params.get('page') || 1;\n\n  const addItem = el => {\n    const item = document.createElement('li');\n    item.classList.add('news-list-item');\n\n    const link = document.createElement('a');\n    link.classList.add('news-list-item__link');\n    link.href = el.url;\n    item.appendChild(link);\n\n    const img = document.createElement('img');\n    img.classList.add('news-list-item__img');\n    img.src = el.image;\n    link.appendChild(img);\n\n    const content = document.createElement('div');\n    content.classList.add('news-list-item__content');\n    item.appendChild(content);\n\n    const date = document.createElement('span');\n    date.classList.add('news-list-item__date');\n    content.appendChild(date);\n\n    const xmlns = 'http://www.w3.org/2000/svg';\n    const xlink = 'http://www.w3.org/1999/xlink';\n    const dateImg = document.createElementNS(xmlns, 'svg');\n    dateImg.classList.add('news-list-item__date-img');\n    date.appendChild(dateImg);\n\n    const dateImgUse = document.createElementNS(xmlns, 'use');\n    dateImgUse.setAttributeNS(xlink, 'href', '/resourse/images/shared-sprite-icons.svg#icon-calendar');\n    dateImg.appendChild(dateImgUse);\n\n    date.appendChild(document.createTextNode(el.date));\n\n    const title = document.createElement('a');\n    title.classList.add('news-list-item__title');\n    title.href = el.url;\n    title.textContent = el.title;\n    content.appendChild(title);\n\n    const text = document.createElement('div');\n    text.classList.add('news-list-item__text');\n    text.textContent = el.content;\n    content.appendChild(text);\n\n    newsListList.appendChild(item);\n  };\n\n  const onClickNewsListBtnLoadMore = async () => {\n    newsListBtnLoadMore.disabled = true;\n    try {\n      const url = '/index.php?route=news_list/loadMore';\n      const body = JSON.stringify({ page: page + 1 });\n      const response = await fetch(url, { method: 'POST', body });\n      const news = await response.json();\n\n      news.items.forEach(addItem);\n\n      newsListPaginationWrapper.innerHTML = news.pagination;\n      if (news.countLoadItems) {\n        newsListBtnLoadMoreCount.textContent = news.countLoadItems;\n        newsListBtnLoadMore.disabled = false;\n      } else {\n        newsListBtnLoadMore.remove();\n      }\n\n      ++page;\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  newsListBtnLoadMore.addEventListener('click', onClickNewsListBtnLoadMore);\n}\n"]}